{% extends "base.html" %}

{% block content %}
<div id="successMessage" class="success-message" style="display:none;">
    âœ“ Your RSVP has been received! Thank you for signing up.
</div>

<script>
    // Look for ?success=1 in the URL
    const urlParams = new URLSearchParams(window.location.search);
    if (urlParams.get("success") === "1") {
        const msg = document.getElementById("successMessage");
        msg.style.display = "block";
    }
</script>


<p><a href="{{ url_for('home') }}">â† Back to events</a></p>

<h1>{{ event.title }}</h1>

<p>
    <strong>{{ event.organization }}</strong> Â· <span class="category-badge">{{ event.category }}</span>
</p>

<p>
    ğŸ“… {{ event.date.strftime("%B %d, %Y") }} Â· ğŸ“ {{ event.location }}
</p>

<hr>

<p>
    {{ event.description }}
</p>

<hr>

<h2>RSVP for this event</h2>

<form method="POST" action="{{ url_for('rsvp_event', event_id=event.id) }}" class="form-card">
    <label>Name</label>
    <input type="text" name="name" required>

    <label>Email</label>
    <input type="text" name="email" required>

    <label>Phone (optional)</label>
    <input type="text" name="phone">

    <br><br>
    <button type="submit">Submit RSVP</button>
</form>

{% if event.rsvps %}
<div class="form-card" style="margin-top: 20px;">
    <h3>People who have RSVP'd ({{ event.rsvps|length }})</h3>
    <ul>
        {% for r in event.rsvps %}
            <li>{{ r.name }}</li>
        {% endfor %}
    </ul>
</div>
{% endif %}

{% endblock %}